.TH FPTHRD_MUTEXATTR 3F "" "FPTHRD API"

.SH NAME
fpthrd_mutexattr_init, fpthrd_mutexattr_destroy, fpthrd_mutexattr_setpshared, fpthrd_mutexattr_getpshared \- Mutex initialization attributes

.SH SYNOPSIS
.B USE fpthrd

.BI "CALL fpthrd_mutexattr_init(" attr " [, " ierr "])"

.BI "CALL fpthrd_mutexattr_destroy(" attr " [, " ierr "])"

.BI "CALL fpthrd_mutexattr_setpshared(" attr ", " pshared " [, " 
.IB ierr "])"

.BI "CALL fpthrd_mutexattr_getpshared(" attr ", " pshared " [, " 
.IB ierr "])"

.BI "TYPE(FPTHRD_MUTEXATTR_T) :: " attr
.br
.BI "INTEGER :: " pshared ", " ierr

.SH DESCRIPTION

Mutex attributes can be specified at mutex creation time, by passing a
mutex attribute object as the second argument to 
.BR "fpthrd_mutex_init" (3F).
(Passing 
.B "NULL"
as the second parameter to 
.B "fpthrd_mutex_init"
is equivalent to using a mutex attribute object with
all attributes set to their default values.)

.SS Initialize
.B "fpthrd_mutexattr_init"
allocates system resources for the mutex attribute object 
.I "attr"
which is initialized with default values for the attributes.

.SS Destroy
.B "fpthrd_mutexattr_destroy"
destroys a mutex attribute object and returns all resources used by
the mutex attribute object.
This 
.I "attr"
must not be reused until it is reinitialized. 

.SS "Process Sharing"
Sharing of mutexes between processes is optionally supported by the
POSIX standard.
The following routines are available within FPTHRD, but will return 
.B "ENOSYS"
if the operation is not supported on your system.

.B "fpthrd_mutexattr_setpshared"
sets the shared attribute of 
.I "attr"
to
.I "pshared"
which is either 
.B "FPTHRD_PROCESS_SHARED"
(any mutex initialized with this attribute may be used from different
processes) or
.B "FPTHRD_PROCESS_PRIVATE"
(only threads in the same process by only one of these processes).

.B "fpthrd_mutexattr_getpshared"
retrieves the process sharing parameter for the mutex attribute 
.I "attr"
and returns it in 
.IR "pshared" .

.SH "DIAGNOSTICS"
.BR "fpthrd_mutexattr_init " and
.B "fpthrd_mutexattr_destroy"
always return 0 in the optional
.IR "ierr" .
Other mutex attribute initialization routines return 0 on success and
a non-zero error code on error.

On error, 
.B "fpthrd_mutexattr_setpshared"
returns the following error codes:
.RS
.TP
.B "EINVAL"
Either 
.IR "ierr " or " pshared"
is invalid.
.TP
.B "ENOSYS"
Shared memory mutexes are not supported.
.RE

On error, 
.B "fpthrd_mutexattr_getpshared"
returns the following error code:
.RS
.TP
.B "ENOSYS"
Shared memory mutexes are not supported.
.RE

.SH "SEE ALSO"
.BR "fpthrd_mutex_init" (3F),
.BR "fpthrd_mutex_lock" (3F),
.BR "fpthrd_mutex_unlock" (3F).
