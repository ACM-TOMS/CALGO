.TH FPTHRD_MUTEXATTR 3F 

.SH NAME
fpthrd_mutexattr_setprotocol, fpthrd_mutexattr_getprotocol, fpthrd_mutexattr_setprioceiling, fpthrd_mutexattr_getprioceiling \- Mutex scheduling attributes

.SH SYNOPSIS
.B USE fpthrd

.BI "CALL fpthrd_mutexattr_setprotocol(" mattr ", " protocol 
.BI " [, " ierr "])"

.BI "CALL fpthrd_mutexattr_getprotocol(" mattr ", " protocol 
.BI " [, " ierr "])"

.BI "CALL fpthrd_mutexattr_setprioceiling(" mattr ", " prioceiling 
.BI " [, " ierr "])"

.BI "CALL fpthrd_mutexattr_getprioceiling(" mattr ", " prioceiling 
.BI " [, " ierr "])"

.BI "TYPE(FPTHRD_MUTEXATTR_T) :: " mattr
.br
.BI "INTEGER :: " protocol ", " prioceiling ", " ierr 

.SH DESCRIPTION
Priority mutexes are optionally
supported by the POSIX standard.  The following routines are available
in FPTHRD, but will return 
.B "ENOSYS"
if your systems does not support them.

Mutex attributes can be specified at mutex creation time, by passing a
mutex attribute object as the second argument to 
.BR "fpthrd_mutex_init" (3F).
Passing
.B "NULL"
is equivalent to using a mutex attribute object with all attributes
set to their default values.

.SS "Scheduling Protocol"
.B "fpthrd_mutexattr_setprotocol"
sets the protocol attribute of
.I "mattr"
of priority mutexes to 
.I "protocol"
which is either 
.B "FPTHRD_PRIO_NONE" 
(no change in priority),
.B "FPTHRD_PRIO_INHERIT " 
(inherit the prioroty of the parent thread) or
.B "FPTHRD_PRIO_PROTECT" 
(use the predetermined ceiling priority).
.B "fpthrd_mutexattr_getprotocol"
returns the protocol attribute of 
.I "mattr"
of priority mutexes and returns it in 
.IR "protocol" .

Default value:
.BR "FPTHRD_PRIO_NONE" .
 
.SS "Priority Ceiling"
.B "fpthrd_mutexattr_setprioceiling"
sets the priority ceiling attribute of
.I "mattr"
to 
.I "prioceiling"
which must be within the range of acceptable priorities.
.B "fpthrd_mutexattr_getprioceiling"
returns the current priority ceiling attribute of 
.I "mattr"
in 
.IR "prioceiling" .

.SH "DIAGNOSTICS"

On success, 
.BR "fpthrd_mutexattr_setprotocol" " and " "fpthrd_mutexattr_getprotocol"
return 0 in the optional
.IR "ierr" .
Otherwise, the following non-zero error codes are returned on error:
.RS
.TP
.B "ENOTSUP"
The value of 
.I "protocol"
is unsupported.
.TP
.B "EINVAL"
Either 
.IR "mattr " or " protocol"
is invalid.
.TP
.B "EPERM"
No privilege to perform this operation.
.TP
.B "ENOSYS"
Priority mutexes are not supported.
.RE

On success, 
.BR "fpthrd_mutexattr_setprioceiling" " and " "fpthrd_mutexattr_getprioceiling"
return 0 in the optional
.IR "ierr" .
Otherwise, the following non-zero error codes are returned on error:
.RS
.TP
.B "EINVAL"
Either 
.IR "mattr " or " protocol"
is invalid.
.TP
.B "EPERM"
No privilege for this operation.
.TP
.B "ENOSYS"
Priority mutexes are not supported.
.RE

.SH "SEE ALSO"
.BR "fpthrd_mutex_setprioceiling" (3F).
