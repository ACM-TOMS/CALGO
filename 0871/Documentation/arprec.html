<!-- Generated with BaseML v0.4b -->
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

     <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
       <head>         <meta content="application/xhtml+xml; charset=UTF-8" http-equiv="content-type"/>         <meta content="walter.schreppers@ua.ac.be" name="author"/>         <meta content="author" name="generator"/>                  <link title="Homepage" href="./index.html" rel="top"/>         <link title="Up" href="./index.html" rel="up"/>         <link title="First page" href="./index.html" rel="first"/>         <link title="Previous page" href="./index.html" rel="previous"/>         <link title="Next page" href="./index.html" rel="next"/>         <link title="Last page" href="./index.html" rel="last"/>         <link title="Table of contents" href="./index.html" rel="toc"/>         <link title="Site map" href="./index.html" rel="index"/>         <link media="screen" href="css/screen.css" type="text/css" rel="stylesheet"/>         <link media="screen" href="css/colors.css" type="text/css" rel="stylesheet"/>         <link media="print" href="css/print.css" type="text/css" rel="stylesheet"/>         <title>CANT Research Group -> Precompiler -> ARPREC Example </title>       </head>     <body>
    	<div id="top"></div>
          <div id="header">      <div id="topbar">        <span class="nodisplay">Related sites:</span>        <a href="http://www.ua.ac.be/">University of Antwerp</a> |
        <a href="http://www.win.ua.ac.be/">Department of Mathematics and Computer Science</a>      </div>      <div id="title">        <h1>CANT Research Group</h1>      </div>      <div id="menubar">        <span class="nodisplay">Navigation:</span>        <a href="index.html">Precompiler</a>      </div>    </div>        <div id="sidebar">      
      <div>        <p class="title">Precompiler</p>        <ul>                      <li><a href="index.html">&rsaquo; Introduction</a></li>              <li><a href="download.html">&rsaquo; Download</a></li>              <li><a href="usage.html">&rsaquo; Usage</a></li>              <li><a href="examples.html">&rsaquo; Examples</a></li>              <li><a href="gsl-conversion.html">&rsaquo; GSL Conversion</a></li>                <li><a class="thispage" href="arprec.html">&rsaquo; ARPREC Example</a></li>              </ul>      </div>      <div id="related">        <p class="title">Navigate page</p>        <ul>                <li><a href="#arprec">&rsaquo; ARPREC example</a></li>                </ul>      </div>    </div>            <div id="content">            <a title="Go to the top of this page" href="#top" class="topofpage2">^ TOP</a> 
  <h2 id="arprec">Conversion example for the ARPREC library</h2>Here we show that the precompiler is also suitable for other C++ libraries such as <a href="http://crd.lbl.gov/~dhbailey/mpdist/">ARPREC</a>.
	We take the following example code, this converges a to the value 3 as 
        described in the paper <a href="http://crd.lbl.gov/~dhbailey/dhbpapers/arprec.pdf">ARPREC: An Arbitrary Precision Computation Package</a>:<pre>#include &lt;iostream>
using namespace std;

int main() {
  double a=1.0, b=9.03, c=6.01;

  for( int i=0; i &lt; 80000; i++ ){
    a=((a*a)+b)/c;
  }

  cout &lt;&lt; "a=" &lt;&lt; a &lt;&lt; endl;

  double d=3.0;
  cout &lt;&lt; "3.0-a="&lt;&lt;d-a&lt;&lt;endl;

  return 0;
}</pre>This is standard c++ code using double precision and when we run it we get the following output:<pre>wschrep@pascal:~/arprec/cpp> g++ -O2 -Wall arprec_example.cpp -o arprec_example
wschrep@pascal:~/arprec/cpp> ./arprec_example
a=3
3.0-a=1.33227e-13</pre>Using an appropriate configuration file <a href="files/arprec.xml">aprec.xml</a> we can convert
this example to multi-precision automatically:<pre>wschrep@pascal:~/arprec/cpp> precompile -x arprec.xml arprec_example.cpp arprec_example_pre.cpp
wschrep@pascal:~/arprec/cpp> cat arpec_example_pre.cpp

#include &lt;iostream>
#include &lt;iomanip>
using namespace std;

#include &lt;arprec/mp_real.h>

#include &lt;iostream>
using namespace std;

int main() {

    mp::mp_init(400);

  mp_real a= mp_real( 1.0 );mp_real  b= mp_real( 9.03 );mp_real  c= mp_real( 6.01 );

  for( int i=0; i &lt; 80000; i++ ){
    a=((a*a)+b)/c;
  }

  cout &lt;&lt; "a=" &lt;&lt; a &lt;&lt; endl;

  mp_real d= mp_real( 3.0 );
  cout &lt;&lt; "3.0-a="&lt;&lt;d-a&lt;&lt;endl;

  return 0;
}</pre>Now we can compile and run our converted example which will now run in 400 requested digits precision and get this as output:<pre>wschrep@pascal:~/arprec/cpp> g++ -I ../include/ -O2 -Wall arprec_example_pre.cpp -o arprec_example_pre ../src/libarprec.a
wschrep@pascal:~/arprec/cpp> ./arprec_example_pre
a=10 ^         0 x  3.,

3.0-a=10 ^       -60 x  1.36805748486673986331724833453095150520711486802840120545,</pre>    <br/><br/>As future work we could add an extra &lt;exit> tag so that the insertion of mp::mp_finalize(); before the return statement is
also automated (for this short example we just left it out and it seems to run fine without it). 
      </div>                      <div id="footer">           <div class="left">        For questions regarding this website, please contact the
             <a href="mailto:walter.schreppers@ua.ac.be">webmaster</a>.<br/>        Validate the <a href="http://validator.w3.org/check/referer">XHTML</a> and
             <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a> of this page.
           </div>           <br class="nodisplay noprint"/>           <div class="right">          Copyright CANT 2006.<br/><br/>           </div>         </div>       </body>
     </html>
    
<!-- Generated in 0.005999 (virtual) seconds -->
