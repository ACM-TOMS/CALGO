# This makefile is primarily for checking the implementation 
# against results already obtained. To do this efficiently the
# interactive driver has been editted to take input from stdin
# and put output on stdout. All the other files for PS plots are
# generated by default and then overwritten. 
#
# The file interactive.f is the original driver that prompts for 
# a data file and aske the user whether various other files should
# be created.

include makefile.inc

all: Res1 Res2 Res3 Res4 Res5

SRCLIBS= $(LAPACK) $(BLAS)

src.o: $(INCSRC)/src.f
	$(F77) $(F77OPTS) -c $(INCSRC)/src.f

DRIVERS= driver
RESULTS= Res1 Res2 Res3 Res4 Res5

Objs1= driver.o src.o
driver: $(Objs1)
	$(F77LINK) $(F77LINKOPTS) -o driver $(Objs1) $(SRCLIBS)
Res1: driver data1
	./driver <data1 >Res1_1
	mv dnsplin1.prt Res1_2

Res2: driver data2
	./driver <data2 >Res2_1
	mv dnsplin1.prt Res2_2

Res3: driver data3
	./driver <data3 >Res3_1
	mv dnsplin1.prt Res3_2

Res4: driver data4
	./driver <data4 >Res4_1
	mv dnsplin1.prt Res4_2

Res5: driver data5
	./driver <data5 >Res5_1
	mv dnsplin1.prt Res5_2

diffres: Res1 res1 Res1 res1 Res3 res3 Res4 res4 Res5 res5
	echo "Differences in results from driver"
	$(DIFF)  Res1 res1
	echo "Differences in results from driver"
	$(DIFF)  Res2 res2
	echo "Differences in results from driver"
	$(DIFF)  Res3 res3
	echo "Differences in results from driver"
	$(DIFF)  Res4 res4
	echo "Differences in results from driver"
	$(DIFF)  Res5 res5

clean: 
	rm -rf *.o $(DRIVERS) $(CLEANUP) $(RESULTS) dnsplin1.ps\
                   dnsplin1.ps0 dnsplin1.ps2
