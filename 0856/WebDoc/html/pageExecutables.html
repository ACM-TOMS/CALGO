<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type"
content="text/html;charset=iso-8859-1">

<!-- Required Sandia Meta Tags -->
 <meta name="review" content="08_09_2000">
<meta name="filename" content="pagename.html""
<meta name="subject" content="APPSPACK">
<meta name="keywords" content="APPSPACK">
<meta name="sandia.approval_type> content="formal">
<meta name="sandia.approved" content="2000-8833">
<meta name="sandia.create_date" content="08/09/2000">
<link rev="owns" title="page owner" href="mailto:tgkolda@sandia.gov">
<link rev="made publisher" title="page creator" href="mailto:tgkolda@sandia.gov">
<meta name="MSSmartTagsPreventParsing" content="TRUE">
<meta name="Author" content="Tamara Kolda">
<!-- End Required Sandia Meta Tags -->

<title>APPSPACK 4.0.2: Using the APPSPACK Executables</title>
<link href="stylesheet.css" rel="stylesheet" type="text/css">
</head>

  <BODY BGCOLOR="#ffffff"
    TEXT="#000000" TOPMARGIN="0" LEFTMARGIN="0" MARGINHEIGHT="0" MARGINWIDTH="0"
    LINK="#003399" VLINK="#990000">

    <a href="http://software.sandia.gov/appspack/"><IMG 
    SRC="../images/appspack.gif" WIDTH="107" HEIGHT="112" BORDER="0"
    ALIGN="left" VSPACE="0" HSPACE="7" ALT="Sandia Home"
    TITLE="Sandia Home"></a>
  
    <a href="http://www.sandia.gov/"><IMG 
    SRC="../images/snl_globe_right03_mod.gif" WIDTH="107" HEIGHT="112" BORDER="0"
    ALIGN="right" VSPACE="0" HSPACE="0" ALT="Sandia Home"
    TITLE="Sandia Home"></A>
  
  <DIV class="topright">

 
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a class="anchor" name="pageExecutables">Using the APPSPACK Executables</a></h1>Depending on the configuration options you choose (see <a class="el" href="pageConfigure.html">Configuration, Compilation, and Installation</a>), APPSPACK will create the following executables: <ul>
<li>
<code>appspack_serial</code> - compiled by default </li>
<li>
<code>appspack_mpi</code> - compiled if MPI is enabled (e.g., <code>--with-mpi-compilers</code> is specified at configure time) </li>
</ul>
<p>
To use either of these, you need only complete three steps. <ul>
<li>
<a class="el" href="pageExecutables.html#pageExecutables_step1">Step 1: Create an executable that evaluates the objective function.</a> </li>
<li>
<a class="el" href="pageExecutables.html#pageExecutables_step2">Step 2: Create an APPSPACK input file</a> </li>
<li>
<a class="el" href="pageExecutables.html#pageExecutables_step3">Step 3: Run APPSPACK</a> </li>
</ul>
<p>
We use <code>example1</code> for illustration. The code for this example is provided in the <code>examples</code> directory (at the top level of the source tree).<h2><a class="anchor" name="pageExecutables_step1">
Step 1: Create an executable that evaluates the objective function.</a></h2>
The first step is to create an executable that evaluates the objective function, and this step is the same for both the serial and MPI versions of the code. The executable will find the point to be evaluated in a specified input file and should put the result in a specified output file.<p>
<ul>
<li>
The general formation for calling the function evaluation executable is as follows:<p>
<div class="fragment"><pre>
&lt;Executable Name&gt; &lt;Input Prefix&gt;.&lt;tag&gt; &lt;Output Prefix&gt;.&lt;tag&gt; &lt;tag&gt;
</pre></div><p>
</li>
<li>
For example, the call might look something like:<p>
<div class="fragment"><pre>
example1 ex1_in.27 ex1_out.27 27
</pre></div><p>
</li>
</ul>
<p>
The tag is a unique identifier that is assigned to each trial point and is used in the naming of files to prevent conflicts. Thus, the calling sequence is as follows: the first argument is the name of the executable, the second argument is the name of the input file, the third argument is the name of the output file, and the fourth argument is a unique tag that can be used in the naming of auxillary files.<p>
The input file is very simply formatted. The first line is an integer that indicates the length of the vector. This is then is followed by the vector itself, one entry per line.<p>
<ul>
<li>
An example input file for the objective function executable:<p>
<div class="fragment"><pre>2
1.24e-1
17.4e-3
</pre></div></li>
</ul>
<p>
Likewise, the output file is also simply formatted. It should contain either a single numeric entry that is the function value or an error string.<p>
<ul>
<li>
An example output file with a function value:<p>
<div class="fragment"><pre>7.58e-3
</pre></div><p>
</li>
<li>
An example output file with a brief error string:<p>
<div class="fragment"><pre>Infeasible wrt Nonlinear Constraint 5
</pre></div></li>
</ul>
<p>
In most cases, the executable you provide is actually a script that goes through several steps in order to calculate the objective value. If you are creating auxillary files, it is important that you use the tag (the fourth argument in the calling sequence) in the naming of your files to prevent conflicts. This is particularly important if running the MPI version of APPSPACK.<p>
See the <a class="el" href="classAPPSPACK_1_1Evaluator_1_1SystemCall.html">APPSPACK::Evaluator::SystemCall</a> object for details on how the evaluation is processed.<h2><a class="anchor" name="pageExecutables_step2">
Step 2: Create an APPSPACK input file</a></h2>
You must provide an input file specifying the parameters for running APPSPACK. (This file is used to create a Parameter::List with three sublists: "Evaluator", "Bounds", and "Solver". These sublists are then used as arguments to the constructors for the <a class="el" href="classAPPSPACK_1_1Evaluator_1_1SystemCall.html">APPSPACK::Evaluator::SystemCall</a>, <a class="el" href="classAPPSPACK_1_1Constraints_1_1Bounds.html">APPSPACK::Constraints::Bounds</a>, and <a class="el" href="classAPPSPACK_1_1Solver.html">APPSPACK::Solver</a> objects, respectively.)<p>
<ul>
<li>
Here is a sample input file (see <code>examples/example1</code>.apps):<p>
<div class="fragment"><pre>
# SAMPLE APPSPACK INPUT FILE
@ "Evaluator"
"Executable Name" string "/home/username/appspack/examples/example1"
"Input Prefix" string "ex1_in"
"Output Prefix" string "ex1_out"
@@
@ "Bounds"
"Upper" vector 2 1 1
"Lower" vector 2 -1 -1
@@
@ "Solver" 
"Debug" int 4
"Initial X" vector 2 2e-1 0.3
@@
</pre></div><p>
</li>
<li>
The format of the input file is as follows.<p>
<ul>
<li>
"Evaluator" <ul>
<li>
"Executable Name" - Name of the executable that evaluates the function. The full path name should be specified. Defaults to "a.out". </li>
<li>
"Input Prefix" - Input file prefix. Defaults to "input". </li>
<li>
"Output Prefix" - Input file prefix. Defaults to "output". </li>
</ul>
</li>
<li>
"Bounds" <ul>
<li>
"Lower" - Lower bounds </li>
<li>
"Upper" - Upper bounds </li>
<li>
See <a class="el" href="pageBoundsParameters.html">Bounds Parameters</a> for more details. </li>
</ul>
</li>
<li>
"Solver" <ul>
<li>
See <a class="el" href="pageParameters.html">Solver Parameters</a> for a complete list of parameters that may be specified here. </li>
</ul>
</li>
</ul>
<p>
</li>
<li>
In general, the input file is processed as follows. Any empty lines are ignored, and comment lines begin with a <code>#</code>. The beginning of a category is specified by a <code>@</code> followed by a space and then the category name in quotes. The end of a category is designated by a line containing the symbols @. Within a category, parameters are defined by name (in quotes), type (<code>string</code>, <code>int</code>, <code>double</code>, <code>vector</code>, or <code>bool</code>,), and value. String values, such as the executable name, are given in quotes. Double and integer values are just numbers. Vectors values include an integer that represents their length followed by each entry. Boolean values are written without quotes. The only recognized boolean values are <code>true</code> and <code>false</code>, and any other input is treated as false. To summarize:<p>
<ul>
<li>
Empty lines are ignored.<p>
</li>
<li>
Comment lines begin with a #.<p>
</li>
<li>
Parameters are specified generically as follows.<p>
<div class="fragment"><pre>
"String Parameter Name" string "A string"
"Integer Parameter Name" int 4
"Double Parameter Name" double 3.0
"Vector Parameter Name" vector 2 0.3 0.4
</pre></div><p>
</li>
<li>
A sublist group is specified as follows. (The dots are replaced by parameter specifications, as above.)<p>
<div class="fragment"><pre>
@ "Sublist List Name In Quotes"
...
@@
</pre></div><p>
</li>
</ul>
</li>
</ul>
<p>
See <a class="el" href="namespaceAPPSPACK.html#a5">APPSPACK::parseTextInputFile()</a> for more details.<h2><a class="anchor" name="pageExecutables_step3">
Step 3: Run APPSPACK</a></h2>
<ul>
<li>
Serial Version<p>
The command line for what is illustrated might look something like the following: <div class="fragment"><pre>
appspack_serial example1.apps
</pre></div><p>
In the serial version, there is one copy of APPSPACK running.<p>
<div align="center">
<img src="Serial_Version4.gif" alt="Serial_Version4.gif">
<p><strong>Serial APPSPACK</strong></p></div>
 </li>
<li>
MPI Version<p>
There is one master processor, and the remainder are workers that actually run the simulations. The command line varies a bit depending on your version of MPI. However, the command line for what is illustrated might be something like the following:<p>
<div class="fragment"><pre>
mpirun -np 5 appspack_mpi example1.apps
</pre></div><p>
<div align="center">
<img src="MPI_Version4.gif" alt="MPI_Version4.gif">
<p><strong>MPI APPSPACK</strong></p></div>
 </li>
</ul>
<p>&nbsp;</p>

<P ALIGN="CENTER"><IMG ALIGN="CENTER"
SRC="../images/gold-rule-500x11.gif" WIDTH="557" HEIGHT="11"
BORDER="0"></P>

<P ALIGN="CENTER"><A HREF="http://www.sandia.gov/">&copy; Sandia
Corporation</A> | <A
HREF="mailto:tgkolda@sandia.gov?Subject=appspack">Site
Contact</A> | <A
HREF="http://www.sandia.gov/general/privacy-security/index.html">Privacy
and Security</A></P>

<P ALIGN="CENTER"><IMG ALIGN="CENTER"
SRC="../images/gold-rule-500x11.gif" WIDTH="557" HEIGHT="11"
BORDER="0"></P> 

<p align="center"><small>
Generated on Wed Dec 14 18:41:05 2005 for APPSPACK 4.0.2 by <a href="http://www.doxygen.org/index.html">
<img src="../images/doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.8 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2002</small></p>

<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
<P>&nbsp;</p>
</DIV>
  </BODY>
</HTML>


