.TH FPTHRD_SCHED_ATTR 3F 

.SH NAME
fpthrd_attr_setscope, fpthrd_attr_getscope, fpthrd_attr_setinheritsched, fpthrd_attr_getinheritsched, fpthrd_attr_setschedpolicy, fpthrd_attr_getschedpolicy, fpthrd_attr_setschedparam, fpthrd_attr_getschedparam \- Thread scheduling attributes

.SH SYNOPSIS
.B USE fpthrd

.BI "CALL fpthrd_attr_setscope(" attr ", " scope " [, "
.IB ierr "])"

.BI "CALL fpthrd_attr_getscope(" attr ", " scope " [, "
.IB ierr "])"

.BI "CALL fpthrd_attr_setinheritsched(" attr ", " inherit " [, "
.IB ierr "])"

.BI "CALL fpthrd_attr_getinheritsched(" attr ", " inherit " [, "
.IB ierr "])"

.BI "CALL fpthrd_attr_setschedpolicy(" attr ", " schedpolicy " [, "
.IB ierr "])"

.BI "CALL fpthrd_attr_getschedpolicy(" attr ", " schedpolicy " [, "
.IB ierr "])"

.BI "CALL fpthrd_attr_setschedparam(" attr ", " schedparam " [, "
.IB ierr "])"

.BI "CALL fpthrd_attr_getschedparam(" attr ", " schedparam " [, "
.IB ierr "])"

.BI "TYPE(FPTHRD_ATTR_T) :: " attr
.br
.BI "INTEGER :: " inherit ", " schedpolicy ", " scope
.BI ", " ierr
.br
.BI "TYPE(FSCHED_PARAM) :: " schedparam


.SH DESCRIPTION

Setting attributes for threads is achieved by filling a
thread attribute object 
.I "attr"
of type 
.BR "FPTHRD_ATTR_T" ,
then passing it as
the second argument to 
.BR "fpthrd_create" (3F).
(Passing 
.B "NULL"
as the second paramter of 
.B "fpthrd_create"
is equivalent to
using a thread attribute object with all attributes set to their
default values.)

.BR "fpthrd_attr_init" (3F)
initializes the thread attribute object 
.I "attr"
and
fills it with default values for the attributes. (The relevant default 
values for attributes are listed below.)

Each attribute 
.I "attrname"
(see below for a list of scheduling attributes) can
be individually set using the routine 
.BI "fpthrd_attr_set" "attrname"
and retrieved using the routine 
.BI "fpthrd_attr_get" "attrname."

The following thread scheduling attributes 
.RI ( "attrname" )
are supported:

.SS scope

Define the scheduling contention scope for the created thread.  The
only value supported in the FPTHRD API is
.BR "FPTHRD_SCOPE_PROCESS" .
This means that scheduling contention occurs only
between the threads of the running process: thread priorities are
interpreted relative to the priorities of the other threads of the
process, regardless of the priorities of other processes.

The other possible value, 
.BR "FPTHRD_SCOPE_SYSTEM" ,
means that the threads contend for CPU time
with all processes running on the machine. In particular, thread
priorities are interpreted relative to the priorities of all other
processes on the machine. 

Default value: 
.BR "FPTHRD_SCOPE_PROCESS" .

.SS inheritsched

Define from where the scheduling policy and scheduling parameters for
the newly created thread are determined.
The two possible values for this attribute are
.B "FPTHRD_EXPLICIT_SCHED" 
(the values of the
.I "schedpolicy"
and 
.I "schedparam"
attributes are used for the new thread)
and
.BR "FPTHRD_INHERIT_SCHED" 
(the attributes are inherited from the parent thread).

Default value: 
.BR "FPTHRD_EXPLICIT_SCHED" .

.SS schedpolicy

Define the scheduling policy for the thread.
One of
.RS
.TP
.B "FSCHED_FIFO"
allows a thread to run until it blocks, it exits or there is a higher 
priority thread that can run.  When a thread is preempted, it moves to 
the head of its priorty queue and when a blocked thread becomes
runnable, it moves to the tail of its priority queue.
.TP
.B "FSCHED_RR"
is the same as
.B "FSCHED_FIFO"
except that a thread will automatically move to the tail of its
priority queue after running a fixed amount of time.
.TP
.B "FSCHED_OTHER"
behaves exactly like
.BR "FSCHED_RR" .
.RE

Default value: 
.BR "FSCHED_OTHER" .

The scheduling policy of a thread can be changed after creation with
.BR "fpthrd_setschedparam" (3F).

.SS schedparam

Define the scheduling parameters (essentially, the scheduling
priority) for the thread. 
The scheduling parameters of a thread can be changed after creation with
.BR "fpthrd_setschedparam" (3F).

.SH "DIAGNOSTICS"

All routines return 0 in the optional
.I ierr
on success and a non-zero error code on error.
On success, the 
.BI "fpthrd_attr_get" "attrname"
routines also return the
current value of the attribute 
.I "attrname"
in their second argument.

The 
.B "fpthrd_attr_setscope"
routine returns the following error
codes on error:
.RS
.TP
.B "EINVAL"
The specified 
.I "scope"
is not one of 
.B "FPTHRD_SCOPE_SYSTEM"
or
.BR "FPTHRD_SCOPE_PROCESS" .
.TP
.B "ENOTSUP"
The specified 
.I "scope"
is 
.B "FPTHRD_SCOPE_SYSTEM"
(not supported).
.RE

The 
.B "fpthrd_attr_setinheritsched"
routine returns the following error
code on error:
.RS
.TP
.B "EINVAL"
The specified 
.I "inherit"
is not one of 
.B "FPTHRD_INHERIT_SCHED"
or
.BR "FPTHRD_EXPLICIT_SCHED" .
.RE

The 
.B "fpthrd_attr_setschedpolicy"
routine returns the following error
code on error:
.RS
.TP
.B "EINVAL"
The specified 
.I "schedpolicy"
is not one of 
.BR "FSCHED_OTHER" ,
.BR "FSCHED_FIFO" ,
or
.BR "FSCHED_RR" .
.RE

The 
.B "fpthrd_attr_setschedparam"
routine returns the following error
code on error:
.RS
.TP
.B "EINVAL"
The priority specified in 
.I "schedparam"
is outside the range of allowed
priorities for the scheduling policy currently in 
.IR "attr" .
.RE


.SH "SEE ALSO"
.BR "fpthrd_create" (3F),
.BR "fpthrd_attr_init" (3F),
.BR "fpthrd_setschedparam" (3F).
